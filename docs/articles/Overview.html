<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="eyesim">
<title>Overview • eyesim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Overview">
<meta property="og:description" content="eyesim">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eyesim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Overview.html">Overview</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Overview</h1>
            
      
      
      <div class="d-none name"><code>Overview.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="eye-movement-similarity-analysis">Eye-movement similarity analysis<a class="anchor" aria-label="anchor" href="#eye-movement-similarity-analysis"></a>
</h2>
<p>The main goal of this <code>eyesim</code> is to provide tools for computing measures of similarity between eye-movement fixation data collected over a series of trials embedded in an experimental design. A major focus of the library is to offer easy ways to compare fixation patterns between two experimental states, for example, between perceiving an image and remembering that same image. These kinds of analyses are useful in assessing and quantifying so-called “eye-movement reinstatement” in studies of memory. Below we describe some basic aspects of the library that should allow one to get started with it.</p>
</div>
<div class="section level2">
<h2 id="a-basic-unit-the-fixation-group">A Basic unit: the fixation group<a class="anchor" aria-label="anchor" href="#a-basic-unit-the-fixation-group"></a>
</h2>
<p>A fixation group is a set of eye-movement fixations that comprise a meaningful unit in a study, for example, a trial, a condition, a participants, a time window, etc. Every fixation group contains a set of xy coordinates and corresponding vectors indicating the <code>onset</code> (when did the fixation start?) and the <code>duration</code> (how long did the fixation last?) of the sequence of fixations. Below we create a fixation group from a set of 3 coordinates occurring at at times 0, 10, and 60.</p>
<p>After creating a <code>fixation_group</code> object, we then plot it to visualize the location of the three fixations. The size of each point is scaled by duration and the color of each point is mapped to the onset time, with yellow colors being early-ocurring and red colors being late-occurring in this group.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">eyesim</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">fg</span> <span class="op">&lt;-</span> <span class="fu">fixation_group</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">0</span><span class="op">)</span>, onset<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span>,<span class="fl">60</span><span class="op">)</span>, duration<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">50</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span><span class="op">)</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>Now we create larger group consisting of 25 randomly generated eye-movements.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## generate random fixation coordinates</span>
<span class="va">cds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">25</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>

<span class="co">## generate random increasing onsets</span>
<span class="va">onset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>

<span class="co">## construct a "fixation_group" object</span>
<span class="va">fg</span> <span class="op">&lt;-</span> <span class="fu">fixation_group</span><span class="op">(</span>x<span class="op">=</span><span class="va">cds</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, y<span class="op">=</span><span class="va">cds</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, onset<span class="op">=</span><span class="va">onset</span>, duration<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">onset</span><span class="op">)</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span><span class="op">)</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>That’s a pretty busy display, but captures the sequence of eye-movements. We can also plot various kinds of “density” maps which show where the fixations were most likely to occur.</p>
<p>Below we show three different ways of plotting fixation density: a contour plot, a raster plot, and a filled contour plot.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span>, typ<span class="op">=</span><span class="st">"contour"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, bandwidth<span class="op">=</span><span class="fl">35</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span>, typ<span class="op">=</span><span class="st">"raster"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, bandwidth<span class="op">=</span><span class="fl">35</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span>, typ<span class="op">=</span><span class="st">"filled_contour"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, bandwidth<span class="op">=</span><span class="fl">35</span><span class="op">)</span>

<span class="va">p1</span><span class="op">+</span><span class="va">p2</span><span class="op">+</span><span class="va">p3</span>
<span class="co">#&gt; Warning: Removed 396 rows containing missing values (geom_raster).</span>
<span class="co">#&gt; Warning: It is deprecated to specify `guide = FALSE` to remove a guide. Please use `guide = "none"` instead.</span>
<span class="co">#&gt; It is deprecated to specify `guide = FALSE` to remove a guide. Please use `guide = "none"` instead.</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>We can also vary the bandwidth of the two-diemnsional density estimation procedure to visualize the fixations at different levels of smoothness.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span>, typ<span class="op">=</span><span class="st">"filled_contour"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, bandwidth<span class="op">=</span><span class="fl">20</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span>, typ<span class="op">=</span><span class="st">"filled_contour"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, bandwidth<span class="op">=</span><span class="fl">60</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg</span>, typ<span class="op">=</span><span class="st">"filled_contour"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">10</span>,<span class="fl">110</span><span class="op">)</span>, bandwidth<span class="op">=</span><span class="fl">100</span><span class="op">)</span>

<span class="va">p1</span><span class="op">+</span><span class="va">p2</span><span class="op">+</span><span class="va">p3</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="computing-similarity-between-fixation-groups">Computing similarity between fixation groups<a class="anchor" aria-label="anchor" href="#computing-similarity-between-fixation-groups"></a>
</h2>
<p>Suppose we have two fixation groups, <code>fg1</code> and <code>fg2</code>, how do we compare these coordinate sets? The <code>eyesim</code> package provides methods for computing similarities between spatial density maps. Below, we generate two eye-movement patterns, one of which is a perturbed version of the other. Then we compute a series of similarity metrics on the two patterns.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">25</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>

<span class="va">cds2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">25</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">cds</span><span class="op">[</span><span class="va">i</span>,<span class="fl">1</span><span class="op">]</span>, y<span class="op">=</span><span class="va">cds</span><span class="op">[</span><span class="va">i</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span><span class="op">)</span><span class="op">)</span>

<span class="va">onset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>
<span class="va">fg1</span> <span class="op">&lt;-</span> <span class="fu">fixation_group</span><span class="op">(</span>x<span class="op">=</span><span class="va">cds</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, y<span class="op">=</span><span class="va">cds</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, onset<span class="op">=</span><span class="va">onset</span>, duration<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">onset</span><span class="op">)</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span>
<span class="va">fg2</span> <span class="op">&lt;-</span> <span class="fu">fixation_group</span><span class="op">(</span>x<span class="op">=</span><span class="va">cds2</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, y<span class="op">=</span><span class="va">cds2</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, onset<span class="op">=</span><span class="va">onset</span>, duration<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">onset</span><span class="op">)</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span>

<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg1</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fg2</span><span class="op">)</span>
<span class="va">p1</span><span class="op">+</span><span class="va">p2</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
<p>To compute the similarity between any two <code>fixation_group</code>s we use the <code>similarity</code> generic function. First we convert the <code>fixation_group</code>s into <code>eye_density</code> objects and then compute their similarity. The default metric for comparing two density maps is the Pearson correlation coefficient.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ed1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eye_density.html">eye_density</a></span><span class="op">(</span><span class="va">fg1</span>, sigma<span class="op">=</span><span class="fl">50</span>, xbounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span>, ybounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="va">ed2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eye_density.html">eye_density</a></span><span class="op">(</span><span class="va">fg2</span>, sigma<span class="op">=</span><span class="fl">50</span>, xbounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span>, ybounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span>


<span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/similarity.html">similarity</a></span><span class="op">(</span><span class="va">ed1</span>,<span class="va">ed2</span><span class="op">)</span>
<span class="va">s1</span>
<span class="co">#&gt; [1] 0.3286463</span></code></pre></div>
<p>We can compute other similarity measures as well. Below we compute similarity using the Pearson correlation, Spearman correlation, the Fisher-transformed Pearson correlation, the cosine similarity, the “l1” similarity based on the 1-norm, the <a href="https://en.wikipedia.org/wiki/Jaccard_index" class="external-link">Jaccard similarity</a> (from <code>proxy</code> package), and the <a href="https://en.wikipedia.org/wiki/Distance_correlation" class="external-link">distance covariance</a> (<code>dcov</code> from the <code>energy</code> package).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">methods</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pearson"</span>, <span class="st">"spearman"</span>, <span class="st">"fisherz"</span>, <span class="st">"cosine"</span>, <span class="st">"l1"</span>, <span class="st">"jaccard"</span>, <span class="st">"dcov"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">meth</span> <span class="kw">in</span> <span class="va">methods</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/similarity.html">similarity</a></span><span class="op">(</span><span class="va">ed1</span>,<span class="va">ed2</span>, method<span class="op">=</span><span class="va">meth</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">meth</span>, <span class="st">":"</span>, <span class="va">s1</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="co">#&gt; [1] "pearson : 0.328646304420908"</span>
<span class="co">#&gt; [1] "spearman : 0.334647525839503"</span>
<span class="co">#&gt; [1] "fisherz : 0.341309885731274"</span>
<span class="co">#&gt; [1] "cosine : 0.882424604889393"</span>
<span class="co">#&gt; [1] "l1 : 0.56789686447425"</span>
<span class="co">#&gt; [1] "jaccard : 0.78948120531418"</span>
<span class="co">#&gt; [1] "dcov : 0.382383632362748"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="computing-similarity-between-set-of-fixation-groups-in-an-experiment">Computing similarity between set of fixation groups in an experiment<a class="anchor" aria-label="anchor" href="#computing-similarity-between-set-of-fixation-groups-in-an-experiment"></a>
</h2>
<p>Suppose we have a memory experiment in which images are presented during an “encoding” block and also during a retrieval/recognition block. Some images are repeated (or cued in some way) and subjects asked to recognize (or recall) the images. In this situation, we might want to compute the pairwise similarity between encoding and retrieval trials when the image was repeated. We might also want to control for non-specific eye-movement similarity between any two arbitrary encoding and retrieval trials.</p>
<p>Here we will simulate data from an experiment in which 50 images are shown during an encoding block and then the same 50 images are shown (or cued) during a retrieval block. We will then compute the eye-movement similarity between the encoding and retrieval trials corresponding to the same imege and the average similarity between a set of non-corresponding encoding and retrieval trials.</p>
<p>We will generate data for three participants, each of which has 50 encoding and 50 retrieval trials. We will use the <code>eye_table</code> data structure, which is an extension of <code>data.frame</code> to hold the data.</p>
<p>The the code below, the function <code>gen_fixations</code> generates a number of fixations (between 1 and 10) that are randomly distributed in a 100 by 100 coordinate frame. Although the fixations for every trial are randomly selected, we assign an experimental condition (“encoding”, “retrieval”) and subject id (“s1”, “s2”, “s3”) to each set of generated coordinates.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gen_fixations</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">imname</span>, <span class="va">phase</span>, <span class="va">trial</span>, <span class="va">participant</span><span class="op">)</span> <span class="op">{</span>
  <span class="co">## generate some number of fixation between 1 and 10</span>
  <span class="va">nfix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span>
  <span class="va">cds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">nfix</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>, y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span><span class="op">)</span>
  
  <span class="va">onset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">nfix</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>
  <span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">cds</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, y<span class="op">=</span><span class="va">cds</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, onset<span class="op">=</span><span class="va">onset</span>, 
                    duration<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">onset</span><span class="op">)</span>,<span class="fl">100</span><span class="op">)</span>, image<span class="op">=</span><span class="va">imname</span>, 
                    phase<span class="op">=</span><span class="va">phase</span>, trial<span class="op">=</span><span class="va">trial</span>, participant<span class="op">=</span><span class="va">participant</span><span class="op">)</span>

<span class="op">}</span>

<span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s1"</span>, <span class="st">"s2"</span>, <span class="st">"s3"</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">snum</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"encoding"</span>, <span class="st">"retrieval"</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">phase</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">trial</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu">gen_fixations</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"im"</span>, <span class="va">trial</span><span class="op">)</span>, <span class="va">phase</span>, <span class="va">trial</span>, <span class="va">snum</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Now we are ready to create an <code>eye_table</code> data structure which stores the fixations and associates them with the experimental design and a grouping structure. Here we will group the fixations by “image”, “participant”, and “phase”. The will allow sets of fixations to be grouped together in <code>fixation_group</code>s so that eye-movement similarity analyses can be carried out. Without grouping variables, there is no way to know how to pool eye-movements together in sets appropriate for kernel density estimation or other analyses.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eyetab</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eye_table.html">eye_table</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"duration"</span>, <span class="st">"onset"</span>, groupvar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"participant"</span>, <span class="st">"phase"</span>, <span class="st">"image"</span><span class="op">)</span>, data<span class="op">=</span><span class="va">df1</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; <span style="color: #949494;"># A tibble: 300 × 4</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   participant, phase, image [300]</span></span>
<span class="co">#&gt;    participant phase    image fixgroup                 </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>                   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> s1          encoding im1   <span style="color: #949494;">&lt;fixation_group [9 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> s1          encoding im10  <span style="color: #949494;">&lt;fixation_group [8 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> s1          encoding im11  <span style="color: #949494;">&lt;fixation_group [2 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> s1          encoding im12  <span style="color: #949494;">&lt;fixation_group [4 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> s1          encoding im13  <span style="color: #949494;">&lt;fixation_group [8 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> s1          encoding im14  <span style="color: #949494;">&lt;fixation_group [6 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> s1          encoding im15  <span style="color: #949494;">&lt;fixation_group [10 × 6]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> s1          encoding im16  <span style="color: #949494;">&lt;fixation_group [2 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> s1          encoding im17  <span style="color: #949494;">&lt;fixation_group [4 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> s1          encoding im18  <span style="color: #949494;">&lt;fixation_group [3 × 6]&gt;</span> </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 290 more rows</span></span></code></pre>
<p>Now we are ready for a fixation similarity analysis. We will compute the similarity between encoding-retrieval pairs, such that each pair consists of the same image viewed at encoding and retrieval, respectively. In essence, we need to “match” each retrieval trial with its corresponding encoding trial, such that the viewed images in both conditions are the same.</p>
<p>The first step is to compute “density maps” for each fixation_group, defined by the intersection of the participant, image, and phase variables and encoded in the <code>eyetab</code> object.</p>
<p>Below we compute the density maps for all combinations of phase, image, and participant and plot the first four density maps of the resulting set.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eyedens</span> <span class="op">&lt;-</span> <span class="fu">density_by</span><span class="op">(</span><span class="va">eyetab</span>, groups<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"phase"</span>, <span class="st">"image"</span>, <span class="st">"participant"</span><span class="op">)</span>, sigma<span class="op">=</span><span class="fl">100</span>, xbounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span>, ybounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span>

<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eyedens</span><span class="op">$</span><span class="va">density</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eyedens</span><span class="op">$</span><span class="va">density</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eyedens</span><span class="op">$</span><span class="va">density</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eyedens</span><span class="op">$</span><span class="va">density</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>

<span class="op">(</span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">p3</span><span class="op">+</span> <span class="va">p4</span><span class="op">)</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>Below we print the first 10 rows of the resulting data.frame, which contains the <code>eye_density</code> objects stored in the <code>density</code> variable.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eyedens</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 300 × 5</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Rowwise: </span></span>
<span class="co">#&gt;    phase    image participant fixgroup                 density       </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> encoding im1   s1          <span style="color: #949494;">&lt;fixation_group [9 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> encoding im1   s2          <span style="color: #949494;">&lt;fixation_group [4 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> encoding im1   s3          <span style="color: #949494;">&lt;fixation_group [9 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> encoding im10  s1          <span style="color: #949494;">&lt;fixation_group [8 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> encoding im10  s2          <span style="color: #949494;">&lt;fixation_group [6 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> encoding im10  s3          <span style="color: #949494;">&lt;fixation_group [9 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> encoding im11  s1          <span style="color: #949494;">&lt;fixation_group [2 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> encoding im11  s2          <span style="color: #949494;">&lt;fixation_group [1 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> encoding im11  s3          <span style="color: #949494;">&lt;fixation_group [4 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> encoding im12  s1          <span style="color: #949494;">&lt;fixation_group [4 × 6]&gt;</span> <span style="color: #949494;">&lt;ey_dnsty [4]&gt;</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 290 more rows</span></span></code></pre></div>
<p>Now that we have the set of <code>eye_density</code> maps, we can compute a similarity analysis. To do this, we use the <code>template_similarity</code> function. We want to compare each “retrieval” density map to its corresponding encoding density map (the “template”). And we want to “match” on the name of the image that was first studied (during “encoding”) and later recognized (during “retrieval”).</p>
<p>First, we split out the encoding and retrieval trials using the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter</a></code> method. Next we call <code>template_similarity</code> and indicating that pairs should matched by the <code>image</code> variable. We choose the <code>fisherz</code> similarity measure and correct for non-specific eye-movement similarity using 50 permutations in which similarity is computed for non-matching image pairs and subtracted from the similarity score. The raw similarity score is returned as <code>eye_sim</code> and the permutation-corrected score is returned as <code>eye_sim_diff</code>. The similarity score among permuted pairs is also returned as <code>perm_sim</code>.</p>
<p>Because the eye-movement fixations were generated randomly, we do not expect a non-zero similarity score for the <code>eye_sim_diff</code> variable, and we can test that with a one-sample t-test.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span>
<span class="va">enc_dens</span> <span class="op">&lt;-</span> <span class="va">eyedens</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phase</span> <span class="op">==</span> <span class="st">"encoding"</span><span class="op">)</span>
<span class="va">ret_dens</span> <span class="op">&lt;-</span> <span class="va">eyedens</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phase</span> <span class="op">==</span> <span class="st">"retrieval"</span><span class="op">)</span>

<span class="va">simres1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/template_similarity.html">template_similarity</a></span><span class="op">(</span><span class="va">enc_dens</span>, <span class="va">ret_dens</span>, match_on<span class="op">=</span><span class="st">"image"</span>, method<span class="op">=</span><span class="st">"fisherz"</span>, permutations<span class="op">=</span><span class="fl">50</span><span class="op">)</span>
<span class="co">#&gt; template_similarity: similarity metric is fisherz</span>
<span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">simres1</span><span class="op">$</span><span class="va">eye_sim_diff</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  One Sample t-test</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; data:  simres1$eye_sim_diff</span>
<span class="co">#&gt; t = -1.267, df = 149, p-value = 0.2071</span>
<span class="co">#&gt; alternative hypothesis: true mean is not equal to 0</span>
<span class="co">#&gt; 95 percent confidence interval:</span>
<span class="co">#&gt;  -0.14357098  0.03138625</span>
<span class="co">#&gt; sample estimates:</span>
<span class="co">#&gt;   mean of x </span>
<span class="co">#&gt; -0.05609237</span></code></pre></div>
<p>We can also plot the histograms of similarity scores.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">simres1</span><span class="op">$</span><span class="va">eye_sim</span>, main<span class="op">=</span><span class="st">"raw eye movement similarity"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">simres1</span><span class="op">$</span><span class="va">perm_sim</span>, main<span class="op">=</span><span class="st">"image-permuted eye movement similarity"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">simres1</span><span class="op">$</span><span class="va">eye_sim_diff</span>, main<span class="op">=</span><span class="st">"corrected eye movement similarity"</span><span class="op">)</span></code></pre></div>
<p><img src="Overview_files/figure-html/unnamed-chunk-15-1.png" width="768"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bradley Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
